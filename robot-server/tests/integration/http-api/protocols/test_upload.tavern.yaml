test_name: Upload basic_transfer_standalone protocol with full response validation.
marks:
  - josh
  - usefixtures:
      - run_server
stages:
  - name: Upload basic_transfer_standalone protocol
    request:
      url: "{host:s}:{port:d}/protocols"
      method: POST
      files:
        files: "tests/integration/protocols/basic_transfer_standalone.py"
    response:
      save:
        json:
          protocol_id: data.id
      status_code: 201
      json:
        data: &response_data
          id: !anystr
          protocolType: python
          files:
            -
             name: basic_transfer_standalone.py
             role: main
          createdAt: !re_search &dt "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d+\\+\\d{2}:\\d{2}$"
          metadata:
            apiLevel: "2.6"
            protocolName: basic_transfer_standalone
            author: engineer@opentrons.com
          analyses:
            -
              id: !anystr
              status: pending
